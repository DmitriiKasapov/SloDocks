# Environment — SloDocs

## Назначение документа
Зафиксировать требования к окружению проекта и перечень
ключевых переменных конфигурации.

Документ:
- не относится к бизнес-логике
- может изменяться без пересмотра MVP
- используется как чек-лист при деплое

---

## Окружения

Проект использует два окружения:

- local — локальная разработка
- production — рабочее окружение

Дополнительные окружения (staging, preview) в MVP не используются.

---

## Базовая конфигурация приложения

- APP_ENV
- APP_URL
- APP_DEBUG
- APP_KEY

Примечания:
- APP_DEBUG всегда отключён в production
- APP_KEY уникален для каждого окружения

---

## Безопасность и сессии

- SESSION_DRIVER
- SESSION_LIFETIME
- SESSION_SECURE_COOKIE (production)
- TRUSTED_PROXIES (при использовании прокси / CDN)

---

## База данных

- DB_CONNECTION
- DB_HOST
- DB_PORT
- DB_DATABASE
- DB_USERNAME
- DB_PASSWORD

Примечания:
- доступ к базе ограничен
- резервное копирование на уровне хостинга

---

## Платежи

Платёжный провайдер: выбирается на этапе реализации.

Переменные:
- PAYMENT_PROVIDER
- PAYMENT_PUBLIC_KEY
- PAYMENT_SECRET_KEY
- PAYMENT_WEBHOOK_SECRET
- PAYMENT_MODE (test / live)

Примечания:
- ключи разделены по окружениям
- webhook обрабатывается сервером

---

## Email и уведомления

Для проекта используется отдельный email-адрес.

Переменные:
- MAIL_MAILER
- MAIL_HOST
- MAIL_PORT
- MAIL_USERNAME
- MAIL_PASSWORD
- MAIL_FROM_ADDRESS
- MAIL_FROM_NAME

Примечания:
- email используется только для сервисных уведомлений
- провайдер email может быть изменён без влияния на логику

---

## Доступ к платному контенту

- ACCESS_TOKEN_LENGTH
- DEFAULT_ACCESS_DURATION_DAYS

Примечания:
- значения могут быть переопределены на уровне услуги
- токены генерируются сервером

---

## Хранилище файлов

- FILESYSTEM_DISK

При использовании S3-совместимого хранилища:
- AWS_ACCESS_KEY_ID
- AWS_SECRET_ACCESS_KEY
- AWS_DEFAULT_REGION
- AWS_BUCKET
- AWS_ENDPOINT (если требуется)

Примечания:
- файлы не имеют публичных URL
- доступ к файлам осуществляется через backend

---

## Логирование и ошибки

- LOG_CHANNEL
- LOG_LEVEL

Опционально:
- SENTRY_DSN

Примечания:
- логируются только технические события
- персональные данные не логируются

---

## Ограничения и защита

- RATE_LIMIT_PAYMENT
- RATE_LIMIT_EMAIL

Примечания:
- значения подбираются эмпирически
- используются для базовой защиты от злоупотреблений

---

## Что осознанно не используется

- секрет-менеджеры
- очереди и воркеры
- отдельные окружения staging
- сложная инфраструктура

---

## Итог

Окружение проекта:
- минимальное
- изолированное
- легко изменяемое
- достаточное для MVP
